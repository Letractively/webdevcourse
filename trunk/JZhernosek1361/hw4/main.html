<html>
<head>
<style>
	  canvas {
	    background: #E1ECFF;
        border: 2px solid #6F2DFF;
      }
	  
</style>
<script src="kinetic-v4.0.1.js"></script>
   <script>
var count=0;
var count1=0;
var points=[6,7,8,9,10,10,10,10,11,1];
var myPoints=0;
var oppositPoints=0;


function startGame() {
for (var i=0; i<2; i++)
myPoints+= Math.floor(Math.random()*points.length);
if(myPoints>21) {
alert("Вы проиграли"); 
}
else {
if(myPoints==21){
alert("Вы выиграли");
}
}
return myPoints;
}



window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 900,
          height: 600
        });
var layer = new Kinetic.Layer(); 
var shirtPic=new Image();
shirtPic.src="1.jpg";
var rect = new Kinetic.Rect({
          x: 5,
          y: 10,
          width: 140,
          height: 200,
          fill: {
		image: shirtPic,
		
		},
          stroke: 'black',
          strokeWidth: 4
        });
 

 var startText = new Kinetic.Text({
          x: 6,
          y: 220,
          stroke: '#555',
          strokeWidth: 5,
          fill: '#6764FF',
          text: 'Начать игру',
          fontSize: 14,
          fontFamily: 'Calibri',
          textFill: '#F5FFFF',
          width: '110',
          padding: 20,
          align: 'center',
          fontStyle: 'italic',
          cornerRadius: 10
        });
	 var group = new Kinetic.Group({
          x: 0,
          y: 0,
        });	
 layer.add(group);
startText.on("mousedown touchstart", function() {
for (var i=0; i<2; i++)
myPoints+= Math.floor(Math.random()*points.length);
if(myPoints>21) {
alert("Вы проиграли"); 
}
else {
if(myPoints==21){
alert("Вы выиграли");
}
}
var colors = ["red", "orange"];
        for(var n = 0; n < 2; n++) {
          // anonymous function to induce scope
          (function() {
            var i = n;
            var box = new Kinetic.Rect({
              x: i * 80,
              width: 80,
              height: 120,
              name: colors[i],
              fill: colors[i],
              stroke: "black",
              strokeWidth: 4
            });
           group.add(box);
          })();
        }

        setTimeout(function() {
          group.transitionTo({
            x: 400,
            y: 250,
            rotation: Math.PI * 2,
            opacity: 1,
            strokeWidth: 3,
            scale: {
              x: 1.3,
              y: 1.3
            },
            duration: 1,
          });
        }, 200);
				myPointsText.setAttrs({
					text: "Ваши очки: "+myPoints
				});
			
		
      })


	  
	  var elseText = new Kinetic.Text({
          x: 6,
          y: 300,
          stroke: '#555',
          strokeWidth: 4,
          fill: '#6764FF',
          text: 'Ещё  карту',
          fontSize: 14,
          fontFamily: 'Calibri',
          textFill: '#F5FFFF',
          width: '110',
          padding: 20,
          align: 'center',
          fontStyle: 'italic',
          cornerRadius: 10
        });
		elseText.on("mousedown touchstart", function() {
		count++;
		 var box1 = new Kinetic.Rect({
              x: -230,
			  y: -200,
              width: 80,
              height: 120,
              fill:"green",
              stroke: "black",
              strokeWidth: 3
       });
	    setTimeout(function() {
          box1.transitionTo({
            x: -count*80,
            y: 0,
            rotation: Math.PI * 2,
            opacity: 1,
            strokeWidth: 3,
   
            duration: 1,
          });
        }, 200);
		
		 group.add(box1);
		  setTimeout(function() {
          group.transitionTo({
            x: (count+4)*90,
            y: 250,
            opacity: 1,
            strokeWidth: 3,
   
            duration: 2,
       });
        }, 300);
		myPoints+=Math.floor(Math.random()*points.length);
		myPointsText.setAttrs({
					text: "Ваши очки: "+myPoints
				});
		if(myPoints>21) {
alert("Вы проиграли"); 
}
else {
if(myPoints==21){
alert("Вы выиграли");
}
}
})
	   
	   
var stopText = new Kinetic.Text({
          x: 6,
          y: 380,
          stroke: '#555',
          strokeWidth: 5,
          fill: '#6764FF',
          text: 'Хватит',
          fontSize: 14,
          fontFamily: 'Calibri',
          textFill: '#F5FFFF',
          width: '110',
          padding: 20,
          align: 'center',
          fontStyle: 'italic',
          cornerRadius: 10
        });
		stopText.on("mousedown touchstart", function() {
		  setTimeout(function() {
          group.transitionTo({ 
            y: 440,
            opacity: 1,
            strokeWidth: 3,
   
            duration: 1,
       });
        }, 50);
		var group1 = new Kinetic.Group({
          x: 200,
          y: 200,
        });	
			
		layer.add(group1);
		for (;;){
		count1++;
     var box4 = new Kinetic.Rect({
	          x: count1*100,
			  y: 70,
              width: 100,
              height: 150,
              fill:"green",
              stroke: "black",
              strokeWidth: 3
       });
	    group1.add(box4);

				oppositPoints+=Math.floor(Math.random()*points.length);
		oppositPointsText.setAttrs({
					text: "Очки крупье: "+oppositPoints
				});
				if(oppositPoints >= myPoints){
				if(oppositPoints<=21) {
				alert("вы проиграли");
				break;
				}
				else {
			    if(oppositPoints > 21)
				{
				alert ("вы выиграли");
				break;
				}
				else {
				if(oppositPoints=myPoints) {
				alert("ничья");
				break;
				}
				}
				}
				}
		}

		
       });
	   

	   
var oppositPointsText=new Kinetic.Text({
	x: 370,
	y: 10,
	fill: '#FFAFB8',
	width: 220,
	height: 50,
	stroke: 'red',
	strokeWidth: 4,
	padding: 10,
	text: "Очки крупье: ",
	fontSize: 18,
	fontFamily: 'Calibri',
	textFill: 'red',
	cornerRadius: 5,
});
var myPointsText=new Kinetic.Text({
	x: 10,
	y: 500,
	fill: '#FFAFB8',
	width: 180,
	height: 50,
	stroke: 'red',
	strokeWidth: 4,
	padding: 10,
	text: "Мои очки: ",
	fontSize: 18,
	fontFamily: 'Calibri',
	textFill: 'red',
	cornerRadius: 5,
});
	    layer.add(rect);
		layer.add(startText);
		layer.add(elseText);
		layer.add(stopText);
		layer.add(oppositPointsText);
		layer.add(myPointsText);
		stage.add(layer);
 }
		


    </script>
  </head>
  <body>
    <div id="container"></div>
      </div>
  </body>
</html>


		
	